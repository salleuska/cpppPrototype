% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/makeDiscrFunction.R
\name{makeOfflineDiscFun}
\alias{makeOfflineDiscFun}
\title{Make offline discrepancy function}
\usage{
makeOfflineDiscFun(discConfig)
}
\arguments{
\item{discConfig}{A list containing at least two functions:
\describe{
\item{simulateNewDataFun}{A function
\verb{function(thetaRow, control = NULL)} that simulates one replicated
dataset \verb{y*} given a single posterior draw. The optional \code{control}
argument can be used to pass model-specific objects (e.g., a NIMBLE
model), but may be ignored if not needed.}
\item{discrepancy}{A function \verb{function(data, thetaRow, ...)} that returns
the scalar discrepancy \verb{D(data, \eqn{\theta})} for one draw.}
}}
}
\value{
A function of the form
\verb{function(MCMCSamples, targetData, control = NULL, ...)} that returns a
list with two numeric vectors:
\itemize{
\item \code{obs}: discrepancies computed on \code{targetData}.
\item \code{sim}: discrepancies computed on posterior predictive replicates.
}
}
\description{
Creates a \code{discFun} that computes observed and replicated discrepancies
for each posterior draw. This is the "offline" version used when the
MCMC output does not already include discrepancy columns.
}
\details{
The returned function evaluates discrepancies conditional on \code{targetData},
which may be the original observed dataset or a replicated dataset from a
calibration world. It expects posterior samples (\code{MCMCSamples}) and the
corresponding \code{targetData}, and uses the model-specific functions in
\code{discConfig} to generate posterior predictive replicates and compute the
discrepancy values.
}
\examples{
\dontrun{
discConfig <- list(
  simulateNewDataFun = function(thetaRow, control = NULL) rnorm(10, thetaRow),
  discrepancy  = function(data, thetaRow) mean((data - thetaRow)^2)
)
discFun <- makeOfflineDiscFun(discConfig)
}

}
