% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/makeDiscrFunction.R
\name{makeOfflineDiscFun}
\alias{makeOfflineDiscFun}
\title{Make offline discrepancy function}
\usage{
makeOfflineDiscFun(control)
}
\arguments{
\item{control}{A list containing at least two functions:
\describe{
\item{simulateNewDataFun}{A function \verb{function(thetaRow, control)} that simulates one
replicated dataset \verb{y*} given one draws of the parameters}
\item{discrepancy}{A function \verb{function(data, thetaRow, ...)} that returns
the scalar discrepancy \code{D(data, Î¸)} for one draw.}
}}
}
\value{
A function of the form \verb{function(MCMCSamples, targetData, ...)}
that returns a list with two numeric vectors:
\itemize{
\item \code{obs}: discrepancies for the observed (replicate) data.
\item \code{sim}: discrepancies for the replicated data.
}
}
\description{
Creates a \code{discFun} that computes observed and replicated discrepancies
for each posterior draw. This is the "offline" version used when the
MCMC output does not already include discrepancy columns.
}
\details{
The returned function evaluates discrepancies conditional on \code{targetData},
which may be the original observed dataset or a replicated dataset from a
calibration world. It expects posterior samples (\code{MCMCSamples}) and the
corresponding \code{targetData}, and uses the model-specific functions in
\code{control} to generate posterior predictive replicates and compute the
discrepancy values.
}
\examples{
\dontrun{
control <- list(
  simulateNewDataFun = function(theta) rnorm(10, theta),
  discrepancy  = function(data, theta) mean((data - theta)^2)
)
discFun <- makeOfflineDiscFun(control)
}

}
